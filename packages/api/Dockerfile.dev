# API Backend Development Dockerfile
FROM node:20-alpine

WORKDIR /app

# Copy root package.json and workspace files
COPY package.json package-lock.json* ./
COPY packages/api/package.json ./packages/api/
COPY packages/coffee-shop-ops/package.json ./packages/coffee-shop-ops/

# Install dependencies
RUN npm install

# Copy source code
COPY packages/api ./packages/api
COPY packages/coffee-shop-ops ./packages/coffee-shop-ops

# Set working directory to the API package
WORKDIR /app/packages/api

# Expose port
EXPOSE 3001

# Start development server
CMD ["npm", "run", "dev"]
